(this.webpackJsonptask=this.webpackJsonptask||[]).push([[0],{50:function(e,t,a){e.exports=a(64)},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(42),i=a.n(c),o=a(17),l=a(18),s=a(20),u=a(19),m=a(26),p=a(32),d=a(25),v=a.n(d),f=a(33),h=a(27),g=a(65),E=a(30),b="user-id";function j(){var e=Object(h.a)(["\n  mutation($input: UsersPermissionsLoginInput!) {\n    login(input: $input) {\n      jwt\n      user {\n        username\n        id\n        email\n        confirmed\n      }\n    }\n  }\n"]);return j=function(){return e},e}var O=Object(E.a)(j()),y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={input:{identifier:"",password:""}},e._confirm=function(){var t=Object(f.a)(v.a.mark((function t(a){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.login,r=n.jwt,c=n.user,e._saveUserData(r,c),e.props.history.push("/sites");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._saveUserData=function(){var e=Object(f.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("auth-token",t),localStorage.setItem(b,a.id);case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState({input:Object(p.a)(Object(p.a)({},e.state.input),{},Object(m.a)({},n,r))})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.input,a=t.identifier,n=t.password;return r.a.createElement(g.a,{mutation:O,variables:this.state,onCompleted:function(t){return e._confirm(t)},onError:function(){return alert("invalid username or password")}},(function(t){return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"identifier"},r.a.createElement("input",{type:"text",name:"identifier",placeholder:"identifier",value:a,onChange:e.handleChange})),r.a.createElement("div",{className:"password"},r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:n,onChange:e.handleChange})),r.a.createElement("div",{className:"login"},r.a.createElement("button",{onClick:t},"Login"))))}))}}]),a}(n.Component),k=a(47),w=a(6);function I(){var e=Object(h.a)(["\n  query {\n  me{\n  username\n  }\n  user(id:","){\n    sites {\n      title\n      url\n    }\n    }\n  }\n"]);return I=function(){return e},e}var S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=Object(E.a)(I(),localStorage.getItem(b));return r.a.createElement(g.b,{query:t},(function(t){var a=t.data;return t.loading?r.a.createElement("div",null,"loading..."):a?a.user.sites?r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"username"}," ",a.me.username),r.a.createElement("button",{onClick:function(){localStorage.removeItem("auth-token"),localStorage.removeItem(b),e.props.history.push("/sign-in")}},"Log out")),r.a.createElement("div",{className:"sites"},r.a.createElement("div",{className:"title"},"Sites"),a.user.sites.map((function(e){return r.a.createElement("div",{className:"site"},r.a.createElement("div",{className:"site-name"},e.title),r.a.createElement("div",{className:"site-url"},e.url))})))):r.a.createElement("div",null,"received no sites"):r.a.createElement("div",null,"data is undefined")}))}}]),a}(n.Component),N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return(r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"logout"},r.a.createElement("button",{onClick:function(){localStorage.removeItem("auth-token"),localStorage.removeItem(b),e.props.history.push("/sign-in")}},"Log out")))))}}]),a}(n.Component),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",render:function(){return localStorage.getItem(b)?r.a.createElement(w.a,{to:"/sites"}):r.a.createElement(w.a,{to:"/sign-in"})}}),r.a.createElement(w.b,{exact:!0,path:"/sign-in",render:function(e){return localStorage.getItem(b)?r.a.createElement(w.a,{to:"/sites"}):r.a.createElement(y,e)}}),r.a.createElement(w.b,{exact:!0,path:"/sites",render:function(e){return"2"===localStorage.getItem(b)?r.a.createElement(w.a,{to:"/pricing-a"}):localStorage.getItem(b)?r.a.createElement(S,e):r.a.createElement(w.a,{to:"/sign-in"})}}),r.a.createElement(w.b,{exact:!0,path:"/pricing-a",render:function(e){return localStorage.getItem(b)?r.a.createElement(N,e):r.a.createElement(w.a,{to:"/sign-in"})}})))}}]),a}(n.Component),x=a(7),L=a(15),_=a(23),q=a(21),U=a(49),A=(a(62),Object(_.b)({uri:"http://167.71.41.6:1337/graphql"})),B=Object(U.a)((function(e,t){t.headers;var a=localStorage.getItem("auth-token");return{headers:{Authorization:a?"Bearer ".concat(a):""}}})),D=new L.a({link:B.concat(A),cache:new q.a});i.a.render(r.a.createElement(x.a,{client:D},r.a.createElement(C,{client:D})),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.f4c114f3.chunk.js.map